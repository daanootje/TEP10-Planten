<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="article-card">

  <template>
    <style>
      :host {
        display: flex;
        margin-top: 30px;
        animation: strollin 1s, fadein 1s;
        width: 100%;
      }
      .contents {
        margin-left: 30px;
        margin-right: 30px;
      }
      .the-image {
        display: flex;
        align-items: center;
        height: 30vh;
      }
      .button-paper {
        display: flex;
        align-items: flex-end;
      }
      .card-contents {
        display: flex;
        height: 50vh;
        overflow: scroll;
        align-items: center;
        justify-content: center;
      }
      .card-actions {
        margin-top: 15px;
      }
    </style>

    <paper-card style="width: 100%;" elevation="2" heading="[[capitalizeFirstLetter(article.plantennaam)]]">
      <div class="card-contents">
        <iron-ajax
        auto
        url='https://api.gettyimages.com/v3/search/images?fields=id,title,thumb,referral_destinations&sort_order=best&phrase=Kalmoes'
        params=''
        handle-as="json"
        headers='{"Api-key": "bwbfckafyjcbgv88y39jeeaw"}'
        on-response="handleImageRequest"
        debounce-duration="300"></iron-ajax>
        <paper-card elevation="2">
          <img class="the-image" src="[[imageUrl]]">
        </paper-card>
        <div class="contents">
          <p>Soort: [[capitalizeFirstLetter(article.soort)]]</p>
          <p>Kleur: [[capitalizeFirstLetter(article.kleur)]]</p>
          <p>Hoogte: [[article.hoogte]] cm</p>
        </div>
      </div>
      <div class="card-actions" style="display: flex;">
        <paper-button class="button-paper" on-tap="goBack" style="background-color: white; margin-top: 15px;" raised>Ga terug</paper-button>
      </div>
    <paper-card>

  </template>

  <script>
    Polymer({
        is: 'article-card',
        properties: {
          article: Object,
          imageUrl: {
            type: String,
            value: "http://www.ikea.com/us/en/images/products/ravenea-potted-plant__0121015_PE277828_S4.JPG"
          }
        },
        goBack() {
          this.fire("button-tap");
        },
        handleImageRequest(data){
          if(data.detail.response.images.length > 0) {
            this.imageUrl = data.detail.response.images[0].display_sizes[0].uri;
          } else {
            this.imageUrl = "http://www.ikea.com/us/en/images/products/ravenea-potted-plant__0121015_PE277828_S4.JPG";
          }
        },
        capitalizeFirstLetter(string) {
          return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
        },
      });
  </script>
</dom-module>
